Program([MethodDecl(s,Id(ShoppingCart),FuncDecl(calculateTotal,[],FloatType,Block([VarDecl(total,FloatLiteral(0.5)),For(Assign(Id(i),IntLiteral(0)),BinaryOp(Id(i),<,FieldAccess(Id(s),itemCount)),Assign(Id(i),BinaryOp(Id(i),+,IntLiteral(1))),Block([Assign(Id(total),BinaryOp(Id(total),+,BinaryOp(FieldAccess(ArrayCell(FieldAccess(Id(s),items),[Id(i)]),price),*,FieldAccess(ArrayCell(FieldAccess(Id(s),items),[Id(i)]),quantity))))])),If(FieldAccess(Id(s),hasDiscount),Block([Assign(Id(total),BinaryOp(Id(total),*,FloatLiteral(0.9)))])),Return(Id(total))])))])